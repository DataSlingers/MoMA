<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Principal Component Analysis with MoMA • MoMA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Principal Component Analysis with MoMA">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MoMA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/moma-quick-start.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/moma-functional-data-analysis.html">Funtional Data Analysis</a>
    </li>
    <li>
      <a href="../articles/moma-PCA.html">Principal Component Anlaysis</a>
    </li>
    <li>
      <a href="../articles/moma-LDA.html">Linear Discriminant Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DataSlingers/MoMA">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Principal Component Analysis with MoMA</h1>
                        <h4 class="author">Luofeng Liao</h4>
            
            <h4 class="date">2019-08-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/DataSlingers/MoMA/blob/master/vignettes/moma-PCA.Rmd"><code>vignettes/moma-PCA.Rmd</code></a></small>
      <div class="hidden name"><code>moma-PCA.Rmd</code></div>

    </div>

    
    
<div id="the-mtcar-data-set" class="section level2">
<h2 class="hasAnchor">
<a href="#the-mtcar-data-set" class="anchor"></a>The <code>mtcar</code> Data Set</h2>
<p>Citing the R documentation of the <code>mtcar</code> (Motor Trend Car Road Tests) data set, “the data was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973–74 models)”.</p>
<p>The data format is as follows.</p>
<pre><code>[, 1]   mpg: Miles/(US) gallon
[, 2]   cyl: Number of cylinders
[, 3]   disp: Displacement (cu.in.)
[, 4]   hp: Gross horsepower
[, 5]   drat: Rear axle ratio
[, 6]   wt: Weight (1000 lbs)
[, 7]   qsec: 1/4 mile time
[, 8]   vs: Engine (0 = V-shaped, 1 = straight)
[, 9]   am: Transmission (0 = automatic, 1 = manual)
[,10]   gear: Number of forward gears
[,11]   carb: Number of carburetors</code></pre>
<p>Suppose we are interested in creating new “features” that</p>
<ul>
<li><p>are linear combinations of known features,</p></li>
<li><p>cpature as much information as possible, and</p></li>
<li><p>comprise of only some of the known features.</p></li>
</ul>
<p>Then we can use the <code><a href="../reference/moma_sfpca.html">moma_spca()</a></code> function (Sparse Principal Component Analysis).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(MoMA)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># Get rid of two categorical variables:</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># X[, 8]: Engine (0 = V-shaped, 1 = straight)</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># X[, 9]: Transmission (0 = automatic, 1 = manual</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">X &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(datasets<span class="op">::</span>mtcars[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">11</span>)])</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">lambda_len &lt;-<span class="st"> </span><span class="dv">30</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">a &lt;-<span class="st"> </span><span class="kw"><a href="../reference/moma_sfpca.html">moma_spca</a></span>(X,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="dt">center =</span> <span class="ot">TRUE</span>, <span class="dt">scale =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    <span class="dt">v_sparse =</span> <span class="kw"><a href="../reference/lasso.html">moma_lasso</a></span>(</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">        <span class="dt">lambda =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dt">length.out =</span> lambda_len)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    ),</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    <span class="dt">rank =</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15">)</a></code></pre></div>
</div>
<div id="access-the-results" class="section level2">
<h2 class="hasAnchor">
<a href="#access-the-results" class="anchor"></a>Access the Results</h2>
<div id="get-the-loadings-by-get_mat_by_indexv-" class="section level4">
<h4 class="hasAnchor">
<a href="#get-the-loadings-by-get_mat_by_indexv-" class="anchor"></a>Get the loadings by <code>get_mat_by_index()$V</code>.</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">ld_<span class="dv">10</span> &lt;-<span class="st"> </span>a<span class="op">$</span><span class="kw">get_mat_by_index</span>(<span class="dt">lambda_v =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(<span class="st">"chosen lambda for the first PC = "</span>, ld_<span class="dv">10</span><span class="op">$</span>chosen_lambda_v[<span class="dv">1</span>], <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a></code></pre></div>
<pre><code>## chosen lambda for the first PC =  1.551724</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(<span class="st">"chosen lambda for the second PC = "</span>, ld_<span class="dv">10</span><span class="op">$</span>chosen_lambda_v[<span class="dv">2</span>], <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a></code></pre></div>
<pre><code>## chosen lambda for the second PC =  1.551724</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(ld_<span class="dv">10</span><span class="op">$</span>V)</a></code></pre></div>
<pre><code>##             PC1        PC2
## mpg  -0.4180873  0.0000000
## cyl   0.4291761  0.0000000
## disp  0.4259293  0.0000000
## hp    0.3736823  0.1333281
## drat -0.2977026  0.2279502
## wt    0.3925498  0.0000000
## qsec -0.1495423 -0.4990620
## gear -0.1446716  0.6250596
## carb  0.1842326  0.5389804</code></pre>
</div>
<div id="project-new-data" class="section level4">
<h4 class="hasAnchor">
<a href="#project-new-data" class="anchor"></a>Project New Data</h4>
<p>Project new data onto the space spanned by new principal components.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Let's pretend the first ten rows of `mtcars` are new data</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">newX &lt;-<span class="st"> </span>X[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># `rank = 2`: the dimension of projected space</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co"># `lambda_v`: an integer, the penalty level</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">a<span class="op">$</span><span class="kw">left_project</span>(<span class="dt">newX =</span> newX, <span class="dt">rank =</span> <span class="dv">2</span>, <span class="dt">lambda_v =</span> <span class="dv">5</span>)<span class="op">$</span>proj_data</a></code></pre></div>
<pre><code>##                           PC1        PC2
## Mazda RX4         -0.76202053  1.1568861
## Mazda RX4 Wag     -0.71582657  0.9756667
## Datsun 710        -2.27240343 -0.3454976
## Hornet 4 Drive    -0.09344371 -1.9725363
## Hornet Sportabout  1.63253137 -0.8512317
## Valiant            0.20790912 -2.4343268
## Duster 360         2.66912438  0.2977371
## Merc 240D         -1.98588037 -0.7146268
## Merc 230          -2.16332116 -1.2525665
## Merc 280          -0.41575484  0.6079251</code></pre>
</div>
<div id="start-a-shiny-app" class="section level4">
<h4 class="hasAnchor">
<a href="#start-a-shiny-app" class="anchor"></a>Start a Shiny App</h4>
<p>Start a Shiny App and see how penalty levels affect loadings and the 2-D projection of original data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(a)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-mtcar-data-set">The <code>mtcar</code> Data Set</a></li>
      <li><a href="#access-the-results">Access the Results</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael Weylandt, Genevera Allen, Luofeng Liao.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
